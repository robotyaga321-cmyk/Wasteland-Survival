<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Telegram RPG</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
/* –¶–≤–µ—Ç–∞ –¥–ª—è —Ä–µ–¥–∫–æ—Å—Ç–∏ */
.common { color: #aaaaaa; } /* –°–µ—Ä—ã–π - –æ–±—ã—á–Ω—ã–π */
.rare { color: #3498db; font-weight: bold; } /* –°–∏–Ω–∏–π - —Ä–µ–¥–∫–∏–π */
.epic { color: #9b59b6; font-weight: bold; text-shadow: 0 0 5px #9b59b6; } /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π - —ç–ø–∏–∫ */
    </style>
</head>
<body>
  
  <button onclick="startHunt()" style="background: #e74c3c; color: white;">–í –ª–µ—Å –Ω–∞ –æ—Ö–æ—Ç—É! ‚öîÔ∏è</button>

  
    <button id="inventory-btn" onclick="toggleInventory()">–†—é–∫–∑–∞–∫ üéí</button>
    
    function renderInventory() {
    const list = document.getElementById('inventory-list');
    const title = document.querySelector('#inventory-screen h3');
    
    // –û—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–æ–π
    list.innerHTML = '';
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    title.innerText = `–í–∞—à–∏ –≤–µ—â–∏ (${inventory.length}/${maxSlots}):`;

    // –†–∏—Å—É–µ–º –∫–∞–∂–¥—ã–π –ø—Ä–µ–¥–º–µ—Ç
    inventory.forEach((item, index) => {
        const li = document.createElement('li');
        li.className = 'loot-item';
        
        // –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º (—Ü–≤–µ—Ç–æ–º —Ä–µ–¥–∫–æ—Å—Ç–∏) –∏ —Ü–µ–Ω–æ–π
        li.innerHTML = `
            <span class="${item.rarity}">${item.name}</span> 
            <span>${item.value} üí∞</span>
        `;
        
        list.appendChild(li);
    });
}

function addItemToInventory(itemKey) {
    const item = items[itemKey]; // –ù–∞—Ö–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –ø–æ –∫–ª—é—á—É
    
    if (inventory.length < maxSlots) {
        inventory.push(item);
        console.log(`–î–æ–±–∞–≤–ª–µ–Ω–æ: ${item.name}`);
        
        // –ï—Å–ª–∏ —ç—Ç–æ —ç–ø–∏—á–µ—Å–∫–∏–π –ø—Ä–µ–¥–º–µ—Ç, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç
        if (item.rarity === 'epic') {
            tg.HapticFeedback.notificationOccurred('success'); // –õ–µ–≥–∫–∞—è –≤–∏–±—Ä–∞—Ü–∏—è Telegram
        }
        
        renderInventory(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ä—é–∫–∑–∞–∫, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ–±–Ω–æ–≤–∫—É
        return true;
    } else {
        tg.showAlert("–†—é–∫–∑–∞–∫ –ø–æ–ª–æ–Ω! üéíüö´");
        return false;
    }
}
// –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
function saveGame() {
    const gameData = {
        inventory: inventory,
        gold: gold,
        hp: hp
    };
    // –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç –≤ —Å—Ç—Ä–æ–∫—É –∏ –∫–ª–∞–¥–µ–º –≤ –ø–∞–º—è—Ç—å
    localStorage.setItem('myRpgSave', JSON.stringify(gameData));
    console.log("–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞! üíæ");
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
function loadGame() {
    const saved = localStorage.getItem('myRpgSave');
    if (saved) {
        const data = JSON.parse(saved);
        inventory = data.inventory || [];
        gold = data.gold || 0;
        hp = data.hp || 100;
        renderInventory(); // –°—Ä–∞–∑—É –æ–±–Ω–æ–≤–ª—è–µ–º —ç–∫—Ä–∞–Ω
        console.log("–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã! ‚úÖ");
    }
}

// –í—ã–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
loadGame();

    <script>
const tg = window.Telegram.WebApp;
tg.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

// üéí –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
let inventory = []; 
const maxSlots = 20;
let hp = 100;
let gold = 0;

// üì¶ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–Ω–∞—à–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
const items = {
    'wolf_tooth': { name: "–í–æ–ª—á–∏–π –∫–ª—ã–∫ ü¶∑", rarity: "common", value: 5 },
    'wolf_hide': { name: "–®–∫—É—Ä–∞ –≤–æ–ª–∫–∞ üê∫", rarity: "common", value: 12 },
    'old_ring': { name: "–°—Ç–∞—Ä–æ–µ –∫–æ–ª—å—Ü–æ üíç", rarity: "rare", value: 50 },
    'junk': { name: "–û–±–ª–æ–º–∫–∏ –∫–æ—Å—Ç–µ–π ü¶¥", rarity: "common", value: 1 }
};

// ‚ú® –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–µ—Å—Ç–∞ –≤ —Ä—é–∫–∑–∞–∫–µ
function canAddItem() {
    return inventory.length < maxSlots;
}

console.log("–ú–æ–∑–≥ –∏–≥—Ä—ã –∑–∞–ø—É—â–µ–Ω! –†—é–∫–∑–∞–∫ –≥–æ—Ç–æ–≤.");

function toggleInventory() {
    const screen = document.getElementById('inventory-screen');
    // –ï—Å–ª–∏ –æ–∫–Ω–æ —Å–∫—Ä—ã—Ç–æ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º, –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ ‚Äî –ø—Ä—è—á–µ–º
    if (screen.style.display === 'none') {
        screen.style.display = 'block';
        renderInventory(); // –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º—ã –Ω–∞–ø–∏—à–µ–º —Å–ª–µ–¥—É—é—â–µ–π
    } else {
        screen.style.display = 'none';
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ—Ö–æ—Ç—ã
function startHunt() {
    // –¢–∞–±–ª–∏—Ü–∞ —à–∞–Ω—Å–æ–≤ –¥–ª—è –≤–æ–ª–∫–∞
    const wolfLoot = [
        { id: 'wolf_tooth', chance: 0.7 },
        { id: 'wolf_hide', chance: 0.4 },
        { id: 'old_ring', chance: 0.1 }
    ];

    let dropped = [];
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π –ø—Ä–µ–¥–º–µ—Ç –Ω–∞ —à–∞–Ω—Å –≤—ã–ø–∞–¥–µ–Ω–∏—è
    wolfLoot.forEach(item => {
        if (Math.random() < item.chance) {
            dropped.push({ ...items[item.id], id: item.id });
        }
    });

    // –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ª—É—Ç, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–ø–∞–ª–æ
    if (dropped.length === 0) {
        dropped.push({ ...items['junk'], id: 'junk' });
    }

    showLootWindow(dropped);
}

function showLootWindow(droppedItems) {
    const lootWindow = document.getElementById('loot-window');
    const lootList = document.getElementById('loot-list');
    
    lootList.innerHTML = ''; // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–π —Å–ø–∏—Å–æ–∫
    lootWindow.style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ

    droppedItems.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'loot-item';
        div.innerHTML = `
            <span class="${item.rarity}">${item.name} (${item.value}üí∞)</span>
            <button onclick="takeItem('${item.id}', this)">–í–∑—è—Ç—å</button>
        `;
        lootList.appendChild(div);
    });
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–¥–±–æ—Ä–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
function takeItem(itemKey, button) {
    if (addItemToInventory(itemKey)) {
        button.disabled = true;
        button.innerText = "–í–∑—è—Ç–æ";
        saveGame(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ–¥–±–æ—Ä–∞!
    }
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞
function closeLoot() {
    document.getElementById('loot-window').style.display = 'none';
}

    </script>
    
    <div id="inventory-screen" style="display: none; border: 1px solid #ccc; padding: 10px; margin-top: 10px;">
    <h3>–í–∞—à–∏ –≤–µ—â–∏ (0/20):</h3>
    <ul id="inventory-list"></ul>
</div>

</body>
</html>